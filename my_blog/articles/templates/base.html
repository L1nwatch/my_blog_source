<!--
更新日志:
    2016.10.28 添加一个滑动到顶部的图标, 参考: http://www.ccvita.com/427.html 实现
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="w@tch web site">

    <title>w@tch site</title>
    {% load staticfiles %}
    <link rel="stylesheet" href="{% static 'my_pure-min.css' %}">
    <link rel="stylesheet" href="{% static 'my_grids-responsive-min.css' %}">
    <link rel="stylesheet" href="{% static 'my_blog.css' %}">
    <link rel="stylesheet" href="{% static 'my_monokai.css' %}">
    <link rel="shortcut icon" href="{% static 'favicon.ico' %}">
    <link rel="stylesheet" href="{% static 'my_main.css' %}">
</head>
<body>
<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
        <div class="header">
            <h1 class="brand-title"><a href="{% url 'home' %}">w@tch</a></h1>
            <h2 class="brand-tagline">Valar - Morghulis</h2>
            <nav class="nav">
                <ul class="nav-list">
                    <li class="nav-item">
                        <a class="button-success pure-button" id="id_home_page" href="/">主页</a>
                    </li>
                    <li class="nav-item">
                        <a class="button-success pure-button" id="id_archives" href="{% url 'archives' %}">归档</a>
                    </li>
                    <li class="nav-item">
                        <a class="pure-button" id="id_github" href="https://github.com/L1nwatch">Github</a>
                    </li>
                    <li class="nav-item">
                        <a class="pure-button" id="id_gitbook" href="https://www.gitbook.com/@l1nwatch">GitBook</a>
                    </li>
                    <li class="nav-item">
                        <a class="button-error pure-button" id="id_email" href="mailto:watch1602@gmail.com">Email</a>
                    </li>
                    <li>
                        <form class="pure-form" action="{% url 'search_title' %}" method="post">
                            {{ form.title }}
                            {% csrf_token %}
                        </form>
                    </li>
                    <li class="nav-item">
                        <a class="button-success pure-button" id="id_update_notes" href="{% url 'update_notes' %}"
                           onclick="check_is_valid_click()">手动更新笔记</a>
                    </li>
                </ul>
            </nav>
        </div>
        <div class="footer">
            <nav class="nav">
                <ul class="nav-list">
                    <label>
                        <li>文章数: {{ articles_numbers }}</li>
                    </label>
                    &nbsp
                    <label>
                        <li>创建博客日期: 2016.10.04</li>
                    </label>
                </ul>
            </nav>
        </div>

    </div>

    <div class="content pure-u-1 pure-u-md-3-4">
        <div>
            {% block content %}
            {% endblock %}
            <div class="footer">
                <div class="pure-menu pure-menu-horizontal pure-menu-open">
                    <ul>
                        <li><a id="id_about_me" href="{% url 'about_me' %}">About Me</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<div style="display:none;" class="back-to" id="toolBackTop">
    <a title="返回顶部" onclick="window.scrollTo(0,0);return false;" href="#" class="back-top">
        返回顶部</a>
</div>

<!-- 以下是处理频繁点击的 js -->
<script>
    function check_is_valid_click() {
        var is_valid = "{{ is_valid_click }}" || null;
        if (is_valid == "invalid_click") {
            alert("操作频繁");
        }
    }
</script>

<!-- 以下是管理回到顶部图标的 js -->
<script src="{% static 'jquery.min.js' %}" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        var bt = $('#toolBackTop');
        bt.css("right", 30);

        $(window).scroll(function () {
            var st = $(window).scrollTop();
            if (st > 30) {
                bt.show();
            } else {
                bt.hide();
            }
        });
    })
</script>
</body>
</html>